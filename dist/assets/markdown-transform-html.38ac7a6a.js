function se(e){let r="";for(;fe.test(e);){let t=e.indexOf("!["),n=e.slice(0,t);r+=n,e=e.slice(t+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),c=e.slice(0,a);e=e.slice(a+1),r+=`<p><img alt=${l} src=${c} /></p>`}return r+e}function le(e){let r="";for(;oe.test(e);){let t=e.indexOf("["),n=e.slice(0,t);r+=n,e=e.slice(t+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),c=e.slice(0,a);e=e.slice(a+1),r+=`<a href=${c}>${l}</a>`}return r+e}function C(e,r=!1){let t=ae(e);return t=ce(t),t=ie(t),t=le(t),t=se(t),t=ue(t),r?t:`<p>${t}</p>`}function ae(e){let r="",t=-1;for(;(t=e.indexOf("**"))!=-1;){r+=e.slice(0,t),e=e.slice(t+2);let n=e.indexOf("**");r+=`<strong>${e.slice(0,n)}</strong>`,e=e.slice(n+2)}return e&&(r+=e),r}function ce(e){let r="",t=-1;for(;(t=e.indexOf("*"))!=-1;){r+=e.slice(0,t),e=e.slice(t+1);let n=e.indexOf("*");r+=`<i>${e.slice(0,n)}</i>`,e=e.slice(n+1)}return e&&(r+=e),r}function ie(e){let r="",t=-1;for(;(t=e.indexOf("`"))!=-1;){r+=e.slice(0,t),e=e.slice(t+1);let n=e.indexOf("`");r+=`<code class=single-code>${e.slice(0,n)}</code>`,e=e.slice(n+1)}return e&&(r+=e),r}function ue(e){return e.replace(/icon:(\w+)(\s|\b)/g,(r,t)=>`<i class='iconfont icon-${t}'></i>`)}const pe=/(#+)\s(.*)/g,k=/^\s*(\d)\./,oe=/\[(.*)\]\((.*)\)/,fe=/!\[(.*)\]\((.*)\)/,h=/\/\*(.*)\*\//g,L=/(function)([\s\(&lt])/g;function K(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,r=>`
`)),e[0].startsWith(`
`)||(e[0]=`
`+e[0])}function E(e,r){let t="";for(let n of e){let s=n.children.length?E(n.children,r):"";t+=`<li>${C(n.value+s,!0)}</li>`}return`<${r?"ol":"ul"}>${t}</${r?"ol":"ul"}>`}function de(e){return k.test(e)}function $e(e){let r=e.indexOf("-");return r==0||r!=-1&&!e.slice(0,r).trim()}function he(e){return e.indexOf("#")!=-1}function ge(e){return e.startsWith("```")}function me(e){return e.startsWith("> ")}function g(e,r,t){return e<r-1?t:""}function T(e){return e.startsWith("//")||e.startsWith("/*")||e.startsWith("*")||e.startsWith("#")}function we(e){return e.trim()[0]==="|"}function N(e){return h.test(e)}function V(e){return L.test(e)}function m(e){let r="",t=-1;for(;(t=e.indexOf('"'))!=-1||(t=e.indexOf("'"))!=-1;){let n=!1;e.indexOf('"')!=-1&&(n=!0),r+=e.slice(0,t),e=e.slice(t+1);let s=n?e.indexOf('"'):e.indexOf("'");r+=`<q class=declare-string>${e.slice(0,s)}</q>`,e=e.slice(s+1)}return e&&(r+=e),r}function W(e){return e.replace(/([^\w])(false|true)(?!\w)/g,(r,t,n)=>`${t}<span class=declare-boolean>${n}</span>`)}function R(e){return e.replace(/([^\w])(\d+)(?![\w\.])/g,(r,t,n)=>`${t}<span class=declare-number>${n}</span>`)}function F(e){return e.replace(/(\s*null)(?!\w)/g,(r,t)=>`<span class=declare-operator-char>${t}</span>`)}function j(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(e,r){return r?`<span class=line-number>${e}</span>`:""}function z(e){return e.trim().startsWith("::: start")}function ye(e){return e.trim().startsWith("::: end")}function xe(e){return e.trim().startsWith(":::")}function Oe(e){return e.trim().startsWith("::: headStart")}function Se(e){return e.trim().startsWith("::: headEnd")}function be(e){return`<blockquote>${e.slice(2)}</blockquote>`}function v(e,r,t){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=ve(j(a),r++,t)}return n}function ve(e,r,t){let n=[],s="",l=0,a="";e=m(e);let c=e.length;for(let i=0;i<c;i++)if(e[i]==")"){let y="";for(;n.length&&(y=n.pop())!="(";)s=y+s;y!="("?n.push(p(s+")",!1)):(l--,n.push(p(s,!0))),s=""}else e[i]=="("&&l++,n.push(e[i]);let u=0;for(;l--;)u=n.lastIndexOf("("),a="("+p(n.slice(u+1).join(""),!1)+a,n=n.slice(0,u);return n.length&&(a=p(n.join(""),!1)+a),`<p>${w(r,t.lineNumber)}<span>${a}</span></p>`}function p(e,r){if(!e.trim())return r?`(${e})`:e;if(T(e.trim()))return Le(e);let t=e;return t=X(t),t=m(t),t=Q(t),t=ke(t),t=Ie(t),t=Ce(t),t=U(t),t=W(t),t=R(t),t=F(t),r?`(${t})`:t}function Q(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${H(s)}${x(l)}=${Q(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${H(s)}${x(l)}`)}let r="",t=e.split(",");for(let n=0,s=t.length;n<s;n++)r+=`${x(t[n])}${g(n,s,",")}`;return r}function x(e){return/(\s*\w+\s*)?:(\s*\w+\s*)/.test(e)?e.replace(/(\s*\w+\s*)?:(\s*\w+\s*)/,(r,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):V(e)?U(e):e}function U(e){return e.replace(L,(r,t,n)=>`<span class=declare-function>${t}</span>${n}`)}function Ie(e){return e.includes("=>")?e.replace(/=>/g,r=>`<span class=declare-arrow-func>${r}</span>`):e}function Ce(e){return e.replace(/(\w+)(\s*)\(/g,(r,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)}function H(e){return e.replace(/(const|let|var)(\s+)/gi,(r,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`)}function ke(e){return N(e)?X(e):e.replace(/(class|await|in|of|typeof|module|async|this|as|super|module|export\s+default|export|import|from|while|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s+\(\.])/g,(r,t)=>`<span class=declare-operator-char>${t}</span>`)}function Le(e){return`<span class=declare-comments>${e}</span>`}function X(e){return e.replace(h,r=>`<span class=declare-comments>${r}</span>`)}function Ee(e,r,t){if(/(<!--.*-->)/g.test(e))return`${o(r,t)}<span class=declare-comments>${j(RegExp.$1)}</span></p>`;if(/(\s*)<(\!?\w+)(.*)>(.*)<\/\w+>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=P(n);return`${o(r,t)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt${RegExp.$4}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`}else if(/(\s*)<(\!?\w+)(.*)>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=P(n);return`${o(r,t)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt</p>`}else return/(\s*)<\/(\w+)>/g.test(e)?`${o(r,t)}${RegExp.$1}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`:v(e,r++,t)}function o(e,r){return`<p class=line-code>${w(e,r.lineNumber)}`}function P(e){let r="";for(let t=0,n=e.length;t<n;t++){let s=e[t];if(!s.trim()){r+=s;continue}let l=s.indexOf("=");if(l!=-1){let a=s.slice(0,l),c=s.slice(l+1);r+=`<span class=declare-attr-key>${a}</span>=<span class=declare-attr-value>${c}</span>${g(t,n,"&nbsp;")}`}else{r+=s;continue}}return r}function O(){return""}function Te(e,r,t){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=Ne(a,r++,t)}return n}function Ne(e,r,t){let n=[],s="",l=0,a="";for(let u=0;u<e.length;u++)if(e[u]==")"){let i="";for(;n.length&&(i=n.pop())!="(";)s=i+s;i!="("?n.push(f(s+")",!1)):(l--,n.push(f(s,!0))),s=""}else e[u]=="("&&l++,n.push(e[u]);let c=0;for(;l--;)c=n.lastIndexOf("("),a="("+f(n.slice(c+1).join(""),!1)+a,n=n.slice(0,c);return n.length&&(a=f(n.join(""),!1)+a),`<p>${w(r,t.lineNumber)}<span>${a}</span></p>`}function f(e,r){if(!e.trim())return r?`(${e})`:e;if(T(e.trim()))return Fe(e);let t=e;return t=_(t),t=Y(t),t=Re(t),t=m(t),t=We(t),t=W(t),t=R(t),t=F(t),r?`(${t})`:t}function Y(e){if(/^(char|int|String|Byte\[?\]?|[A-Z]+)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${q(s)}${S(l)}=${Y(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${q(s)}${S(l)}`)}let r="",t=e.split(",");for(let n=0,s=t.length;n<s;n++)r+=`${S(t[n])}${g(n,s,",")}`;return r}const B=/(\s*\w+\s*)?:(\s*\w+\s*)/g,D=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function S(e){return D.test(e)?e.replace(D,(r,t,n)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):B.test(e)?e.replace(B,(r,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):e}function We(e){return e.replace(/(\w+)(\s*)\(/g,(r,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)}function q(e){return e.replace(/(const|let|var|int|string|Byte\[?\]?|[A-Z]+)(\s+)/gi,(r,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`)}function Re(e){return N(e)?_(e):e.replace(/(class|in|of|this|super|interface|module|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(r,t)=>`<span class=declare-operator-char>${t}</span>`)}function Fe(e){return`<span class=declare-comments>${e}</span>`}function _(e){return e.replace(h,r=>`<span class=declare-comments>${r}</span>`)}function A(e,r,t){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=je(j(a),r++,t)}return n}function je(e,r,t){let n=[],s="",l=0,a="";for(let u=0;u<e.length;u++)if(e[u]==")"){let i="";for(;n.length&&(i=n.pop())!="(";)s=i+s;i!="("?n.push(d(s+")",!1)):(l--,n.push(d(s,!0))),s=""}else e[u]=="("&&l++,n.push(e[u]);let c=0;for(;l--;)c=n.lastIndexOf("("),a="("+d(n.slice(c+1).join(""),!1)+a,n=n.slice(0,c);return n.length&&(a=d(n.join(""),!1)+a),`<p>${w(r,t.lineNumber)}<span>${a}</span></p>`}function d(e,r){if(!e.trim())return r?`(${e})`:e;if(T(e.trim()))return De(e);let t=e;return t=re(t),t=ee(t),t=Be(t),t=m(t),t=He(t),t=Pe(t),t=te(t),t=W(t),t=R(t),t=F(t),r?`(${t})`:t}function ee(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${J(s)}${b(l)}=${ee(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${J(s)}${b(l)}`)}let r="",t=e.split(",");for(let n=0,s=t.length;n<s;n++)r+=`${b(t[n])}${g(n,s,",")}`;return r}const G=/(\s*\w+\s*)?:(\s*\w+\s*)/g,M=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function b(e){return M.test(e)?e.replace(M,(r,t,n)=>`${t?`<span class=declare-param-type>${t}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):G.test(e)?e.replace(G,(r,t,n)=>t?`<span class=declare-param>${t}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):V(e)?te(e):e}function te(e){return e.replace(L,(r,t,n)=>`<span class=declare-function>${t}</span>${n}`)}function He(e){return e.includes("=>")?e.replace(/=>/g,r=>`<span class=declare-arrow-func>${r}</span>`):e}function Pe(e){return e.replace(/(\w+)(\s*)\(/g,(r,t,n)=>`<span class=declare-func-execute>${t}</span>${n}(`)}function J(e){return e.replace(/(const|let|var|int|string)(\s+)/gi,(r,t,n)=>`<span class=declare-keyword>${t}</span><span class=declare-constant-name>${n}</span>`)}function Be(e){return N(e)?re(e):e.replace(/(class|in|of|this|super|interface|typeof|module|declare|type|keyof|infer|export\s+default|export|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(r,t)=>`<span class=declare-operator-char>${t}</span>`)}function De(e){return`<span class=declare-comments>${e}</span>`}function re(e){return e.replace(h,r=>`<span class=declare-comments>${r}</span>`)}const qe={java:Te,c:O,["c++"]:O,["c#"]:O,js:v,javascript:v,ts:A,typescript:A,html:Ee};function Ae(e,r,t,n){let s="",l=e[r].slice(3).trim().toLowerCase(),a=1;for(++r;r<t&&!e[r].startsWith("```");)s+=n.highlight?qe[l](e[r],a++,n):e[r]+`
`,r++;return e[r]="",{startIdx:r,result:n.highlight?`<pre><span class=language>${l}</span><code>${s}</code></pre>`:`<pre><code>${s}</code></pre>`}}function Ge(e,r,t){let n="";for(;r<t;r++)if(!!e[r].trim())if(e[r].trim()[0]==="-"&&e[r].indexOf("-")!=-1)n+=e[r]+`
`;else break;return n=Me(n),{startIdx:r,result:n}}function Me(e){const r=e.match(/(\s?)+-\s(.*)/g);if(!r)return e;K(r);const t=Je(r);return E(t,!1)}function Je(e){const r=[],t=[],n=e.length;for(let s=0;s<n;s++){const l=e[s].indexOf("-"),a={children:[],value:e[s].slice(l+1),level:l,parent:null};if(!t.length){r.push(a),t.push(a);continue}const c=t[t.length-1].level,u=e[s].indexOf("-");let i;if(c===u)i=t[t.length-1].parent;else if(c>u){for(;t[t.length-1].level>u;)t.pop();i=t[t.length-1].parent}else i=t[t.length-1];a.parent=i,i?i.children.push(a):r.push(a),t.push(a)}return r}function Ze(e,r,t){let n="";for(;r<t;r++)if(!!e[r].trim())if(k.test(e[r]))n+=e[r]+`
`;else break;return n=Ke(n),{startIdx:r,result:n}}function Ke(e){const r=e.match(/\s*\d\.(.*)/g);if(!r)return e;K(r);const t=Ve(r);return E(t,!0)}function Ve(e){const r=[],t=[],n=e.length;for(let s=0;s<n;s++){let l=0;k.test(e[s])&&(l=e[s].indexOf(String(RegExp.$1+".")));const a={children:[],value:e[s].slice(l+2),level:l,parent:null};if(!t.length){r.push(a),t.push(a);continue}const c=t[t.length-1].level,u=l;let i;if(c===u)i=t[t.length-1].parent;else if(c>u){for(;t[t.length-1].level>u;)t.pop();i=t[t.length-1].parent}else i=t[t.length-1];a.parent=i,i?i.children.push(a):r.push(a),t.push(a)}return r}function Z(e){return e.length>6?6:e.length}function ze(e){return e.trim().replace(pe,(r,t,n)=>`<h${Z(t)}>${C(n,!0)}</h${Z(t)}>`)}function Qe(e,r,t){let n="<table>";for(n+=Ue(e[r]),n+="<tbody >",++r;r<t&&e[r].trim()[0]==="|";r++)n+=Xe(e[r]);return n+="</tbody></table>",{startIdx:r-1,result:n}}function Ue(e){let r=-1,t="<thead><tr>";for(let n=0,s=e.length;n<s;n++)e[n]=="|"&&$(e,n-1)&&$(e,n+1)&&(r!=-1&&(t+=`<th>${e.slice(r+1,n)}</th>`),r=n);return t+"</tr></thead>"}function Xe(e){let r=-1,t="<tr>";for(let n=0,s=e.length;n<s;n++)if(e[n]=="|"&&$(e,n-1)&&$(e,n+1)){if(r!=-1){let l=e.slice(r+1,n);if(l.trim()[0]==="-")continue;t+=`<td>${l}</td>`}r=n}return t+"</tr>"}function $(e,r){return e[r]===" "||e[r]==null}function ne(e,r,t){let n="<div class=flex-layout>",s="";for(++r;r<t&&!ye(e[r]);)xe(e[r])?(n+=`<div class=flex-layout-item>${I(s)}</div>`,s=""):s+=e[r].trim()?e[r]+`
`:"",r++;return n+=`<div class=flex-layout-item>${I(s)}</div>`,n+="</div>",{result:n,startIdx:r}}function Ye(e,r,t){let n="<div class=head-layout>";for(++r;r<t&&!Se(e[r]);)if(z(e[r])){const{startIdx:s,result:l}=ne(e,r,t);n+=l,r=s+1}else n+=e[r].trim()?I(e[r]):"",r++;return n+="</div>",{result:n,startIdx:r}}const _e={lineNumber:!1,highlight:!1};function I(e,r){const t=e.split(`
`);let n="",s=(t==null?void 0:t.length)||0;for(let l=0;l<s;){if(he(t[l]))n+=ze(t[l]);else if(Oe(t[l])){const{result:a,startIdx:c}=Ye(t,l,s);l=c,n+=a}else if(z(t[l])){const{result:a,startIdx:c}=ne(t,l,s);l=c,n+=a}else if(we(t[l])){const{result:a,startIdx:c}=Qe(t,l,s);l=c,n+=a}else if($e(t[l])){const{result:a,startIdx:c}=Ge(t,l,s);l=c-1,n+=a}else if(de(t[l])){const{result:a,startIdx:c}=Ze(t,l,s);l=c-1,n+=a}else if(ge(t[l])){const{result:a,startIdx:c}=Ae(t,l,s,r||_e);l=c,n+=a}else me(t[l])?n+=be(t[l]):(t[l]=t[l].trim())&&(n+=C(t[l]));l++}return n}export{I as m};
