function se(e){let t="";for(;fe.test(e);){let r=e.indexOf("!["),n=e.slice(0,r);t+=n,e=e.slice(r+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),c=e.slice(0,a);e=e.slice(a+1),t+=`<p><img alt=${l} src=${c} /></p>`}return t+e}function le(e){let t="";for(;oe.test(e);){let r=e.indexOf("["),n=e.slice(0,r);t+=n,e=e.slice(r+1);let s=e.indexOf("]("),l=e.slice(0,s);e=e.slice(s+2);let a=e.indexOf(")"),c=e.slice(0,a);e=e.slice(a+1),t+=`<a href=${c}>${l}</a>`}return t+e}function C(e,t=!1){let r=ae(e);return r=ce(r),r=ie(r),r=se(r),r=le(r),r=ue(r),t?r:`<p>${r}</p>`}function ae(e){let t="",r=-1;for(;(r=e.indexOf("**"))!=-1;){t+=e.slice(0,r),e=e.slice(r+2);let n=e.indexOf("**");t+=`<strong>${e.slice(0,n)}</strong>`,e=e.slice(n+2)}return e&&(t+=e),t}function ce(e){let t="",r=-1;for(;(r=e.indexOf("*"))!=-1;){t+=e.slice(0,r),e=e.slice(r+1);let n=e.indexOf("*");t+=`<i>${e.slice(0,n)}</i>`,e=e.slice(n+1)}return e&&(t+=e),t}function ie(e){let t="",r=-1;for(;(r=e.indexOf("`"))!=-1;){t+=e.slice(0,r),e=e.slice(r+1);let n=e.indexOf("`");t+=`<code class=single-code>${e.slice(0,n)}</code>`,e=e.slice(n+1)}return e&&(t+=e),t}function ue(e){return e.replace(/icon:(\w+)(\s|\b)/g,(t,r)=>`<i class='iconfont icon-${r}'></i>`)}const pe=/(#+)\s(.*)/g,k=/^\s*(\d)\./,oe=/\[(.*)\]\((.*)\)/,fe=/!\[(.*)\]\((.*)\)/,h=/\/\*(.*)\*\//g,L=/(function)([\s\(&lt])/g;function z(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,t=>`
`)),e[0].startsWith(`
`)||(e[0]=`
`+e[0])}function E(e,t){let r="";for(let n of e){let s=n.children.length?E(n.children,t):"";r+=`<li>${C(n.value+s,!0)}</li>`}return`<${t?"ol":"ul"}>${r}</${t?"ol":"ul"}>`}function de(e){return k.test(e)}function $e(e){let t=e.indexOf("-");return t==0||t!=-1&&!e.slice(0,t).trim()}function he(e){return e.indexOf("#")!=-1}function ge(e){return e.startsWith("```")}function me(e){return e.startsWith("> ")}function g(e,t,r){return e<t-1?r:""}function T(e){return e.startsWith("//")||e.startsWith("/*")||e.startsWith("*")||e.startsWith("#")}function we(e){return e.trim()[0]==="|"}function N(e){return h.test(e)}function Q(e){return L.test(e)}function m(e){let t="",r=-1;for(;(r=e.indexOf('"'))!=-1||(r=e.indexOf("'"))!=-1;){let n=!1;e.indexOf('"')!=-1&&(n=!0),t+=e.slice(0,r),e=e.slice(r+1);let s=n?e.indexOf('"'):e.indexOf("'");t+=`<q class=declare-string>${e.slice(0,s)}</q>`,e=e.slice(s+1)}return e&&(t+=e),t}function W(e){return e.replace(/([^\w])(false|true)(?!\w)/g,(t,r,n)=>`${r}<span class=declare-boolean>${n}</span>`)}function R(e){return e.replace(/([^\w])(\d+)(?![\w\.])/g,(t,r,n)=>`${r}<span class=declare-number>${n}</span>`)}function F(e){return e.replace(/(\s*null)(?!\w)/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function j(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(e,t){return t?`<span class=line-number>${e}</span>`:""}function H(e){return e.trim().startsWith("::: start")}function ye(e){return e.trim().startsWith("::: end")}function xe(e){return e.trim().startsWith(":::")}function Oe(e){return e.trim().startsWith("::: headStart")}function Se(e){return e.trim().startsWith("::: headEnd")}function be(e){return`<blockquote>${e.slice(2)}</blockquote>`}function v(e,t,r){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=ve(j(a),t++,r)}return n}function ve(e,t,r){let n=[],s="",l=0,a="";e=m(e);let c=e.length;for(let i=0;i<c;i++)if(e[i]==")"){let y="";for(;n.length&&(y=n.pop())!="(";)s=y+s;y!="("?n.push(p(s+")",!1)):(l--,n.push(p(s,!0))),s=""}else e[i]=="("&&l++,n.push(e[i]);let u=0;for(;l--;)u=n.lastIndexOf("("),a="("+p(n.slice(u+1).join(""),!1)+a,n=n.slice(0,u);return n.length&&(a=p(n.join(""),!1)+a),`<p>${w(t,r.lineNumber)}<span>${a}</span></p>`}function p(e,t){if(!e.trim())return t?`(${e})`:e;if(T(e.trim()))return Le(e);let r=e;return r=Y(r),r=m(r),r=U(r),r=ke(r),r=Ie(r),r=Ce(r),r=X(r),r=W(r),r=R(r),r=F(r),t?`(${r})`:r}function U(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${B(s)}${x(l)}=${U(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${B(s)}${x(l)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${x(r[n])}${g(n,s,",")}`;return t}function x(e){return/(\s*\w+\s*)?:(\s*\w+\s*)/.test(e)?e.replace(/(\s*\w+\s*)?:(\s*\w+\s*)/,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):Q(e)?X(e):e}function X(e){return e.replace(L,(t,r,n)=>`<span class=declare-function>${r}</span>${n}`)}function Ie(e){return e.includes("=>")?e.replace(/=>/g,t=>`<span class=declare-arrow-func>${t}</span>`):e}function Ce(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function B(e){return e.replace(/(const|let|var)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function ke(e){return N(e)?Y(e):e.replace(/(class|await|in|of|typeof|module|async|this|as|super|module|export\s+default|export|import|from|while|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s+\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function Le(e){return`<span class=declare-comments>${e}</span>`}function Y(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}function Ee(e,t,r){if(/(<!--.*-->)/g.test(e))return`${o(t,r)}<span class=declare-comments>${j(RegExp.$1)}</span></p>`;if(/(\s*)<(\!?\w+)(.*)>(.*)<\/\w+>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=D(n);return`${o(t,r)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt${RegExp.$4}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`}else if(/(\s*)<(\!?\w+)(.*)>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=D(n);return`${o(t,r)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt</p>`}else return/(\s*)<\/(\w+)>/g.test(e)?`${o(t,r)}${RegExp.$1}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`:v(e,t++,r)}function o(e,t){return`<p class=line-code>${w(e,t.lineNumber)}`}function D(e){let t="";for(let r=0,n=e.length;r<n;r++){let s=e[r];if(!s.trim()){t+=s;continue}let l=s.indexOf("=");if(l!=-1){let a=s.slice(0,l),c=s.slice(l+1);t+=`<span class=declare-attr-key>${a}</span>=<span class=declare-attr-value>${c}</span>${g(r,n,"&nbsp;")}`}else{t+=s;continue}}return t}function O(){return""}function Te(e,t,r){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=Ne(a,t++,r)}return n}function Ne(e,t,r){let n=[],s="",l=0,a="";for(let u=0;u<e.length;u++)if(e[u]==")"){let i="";for(;n.length&&(i=n.pop())!="(";)s=i+s;i!="("?n.push(f(s+")",!1)):(l--,n.push(f(s,!0))),s=""}else e[u]=="("&&l++,n.push(e[u]);let c=0;for(;l--;)c=n.lastIndexOf("("),a="("+f(n.slice(c+1).join(""),!1)+a,n=n.slice(0,c);return n.length&&(a=f(n.join(""),!1)+a),`<p>${w(t,r.lineNumber)}<span>${a}</span></p>`}function f(e,t){if(!e.trim())return t?`(${e})`:e;if(T(e.trim()))return Fe(e);let r=e;return r=ee(r),r=_(r),r=Re(r),r=m(r),r=We(r),r=W(r),r=R(r),r=F(r),t?`(${r})`:r}function _(e){if(/^(char|int|String|Byte\[?\]?|[A-Z]+)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${G(s)}${S(l)}=${_(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${G(s)}${S(l)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${S(r[n])}${g(n,s,",")}`;return t}const q=/(\s*\w+\s*)?:(\s*\w+\s*)/g,A=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function S(e){return A.test(e)?e.replace(A,(t,r,n)=>`${r?`<span class=declare-param-type>${r}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):q.test(e)?e.replace(q,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):e}function We(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function G(e){return e.replace(/(const|let|var|int|string|Byte\[?\]?|[A-Z]+)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function Re(e){return N(e)?ee(e):e.replace(/(class|in|of|this|super|interface|module|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function Fe(e){return`<span class=declare-comments>${e}</span>`}function ee(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}function M(e,t,r){let n="",s=e.split(`
`);for(let l=0;l<s.length;l++){let a=s[l];n+=je(j(a),t++,r)}return n}function je(e,t,r){let n=[],s="",l=0,a="";for(let u=0;u<e.length;u++)if(e[u]==")"){let i="";for(;n.length&&(i=n.pop())!="(";)s=i+s;i!="("?n.push(d(s+")",!1)):(l--,n.push(d(s,!0))),s=""}else e[u]=="("&&l++,n.push(e[u]);let c=0;for(;l--;)c=n.lastIndexOf("("),a="("+d(n.slice(c+1).join(""),!1)+a,n=n.slice(0,c);return n.length&&(a=d(n.join(""),!1)+a),`<p>${w(t,r.lineNumber)}<span>${a}</span></p>`}function d(e,t){if(!e.trim())return t?`(${e})`:e;if(T(e.trim()))return De(e);let r=e;return r=ne(r),r=re(r),r=Be(r),r=m(r),r=He(r),r=Pe(r),r=te(r),r=W(r),r=R(r),r=F(r),t?`(${r})`:r}function re(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,l,a)=>`${K(s)}${b(l)}=${re(a)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,l,a)=>`${K(s)}${b(l)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${b(r[n])}${g(n,s,",")}`;return t}const J=/(\s*\w+\s*)?:(\s*\w+\s*)/g,Z=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function b(e){return Z.test(e)?e.replace(Z,(t,r,n)=>`${r?`<span class=declare-param-type>${r}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):J.test(e)?e.replace(J,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):Q(e)?te(e):e}function te(e){return e.replace(L,(t,r,n)=>`<span class=declare-function>${r}</span>${n}`)}function He(e){return e.includes("=>")?e.replace(/=>/g,t=>`<span class=declare-arrow-func>${t}</span>`):e}function Pe(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function K(e){return e.replace(/(const|let|var|int|string)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function Be(e){return N(e)?ne(e):e.replace(/(class|in|of|this|super|interface|typeof|module|declare|type|keyof|infer|export\s+default|export|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function De(e){return`<span class=declare-comments>${e}</span>`}function ne(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}const qe={java:Te,c:O,["c++"]:O,["c#"]:O,js:v,javascript:v,ts:M,typescript:M,html:Ee};function Ae(e,t,r,n){let s="",l=e[t].slice(3).trim().toLowerCase(),a=1;for(++t;t<r&&!e[t].startsWith("```");)s+=n.highlight?qe[l](e[t],a++,n):e[t]+`
`,t++;return e[t]="",{startIdx:t,result:n.highlight?`<pre><span class=language>${l}</span><code>${s}</code></pre>`:`<pre><code>${s}</code></pre>`}}function Ge(e,t,r){let n="";for(;t<r;t++)if(!!e[t].trim())if(e[t].trim()[0]==="-"&&e[t].indexOf("-")!=-1)n+=e[t]+`
`;else break;return n=Me(n),{startIdx:t,result:n}}function Me(e){const t=e.match(/(\s?)+-\s(.*)/g);if(!t)return e;z(t);const r=Je(t);return E(r,!1)}function Je(e){const t=[],r=[],n=e.length;for(let s=0;s<n;s++){const l=e[s].indexOf("-"),a={children:[],value:e[s].slice(l+1),level:l,parent:null};if(!r.length){t.push(a),r.push(a);continue}const c=r[r.length-1].level,u=e[s].indexOf("-");let i;if(c===u)i=r[r.length-1].parent;else if(c>u){for(;r[r.length-1].level>u;)r.pop();i=r[r.length-1].parent}else i=r[r.length-1];a.parent=i,i?i.children.push(a):t.push(a),r.push(a)}return t}function Ze(e,t,r){let n="";for(;t<r;t++)if(!!e[t].trim())if(k.test(e[t]))n+=e[t]+`
`;else break;return n=Ke(n),{startIdx:t,result:n}}function Ke(e){const t=e.match(/\s*\d\.(.*)/g);if(!t)return e;z(t);const r=Ve(t);return E(r,!0)}function Ve(e){const t=[],r=[],n=e.length;for(let s=0;s<n;s++){let l=0;k.test(e[s])&&(l=e[s].indexOf(String(RegExp.$1+".")));const a={children:[],value:e[s].slice(l+2),level:l,parent:null};if(!r.length){t.push(a),r.push(a);continue}const c=r[r.length-1].level,u=l;let i;if(c===u)i=r[r.length-1].parent;else if(c>u){for(;r[r.length-1].level>u;)r.pop();i=r[r.length-1].parent}else i=r[r.length-1];a.parent=i,i?i.children.push(a):t.push(a),r.push(a)}return t}function V(e){return e.length>6?6:e.length}function ze(e){return e.trim().replace(pe,(t,r,n)=>`<h${V(r)}>${C(n,!0)}</h${V(r)}>`)}function Qe(e,t,r){let n="<table>";for(n+=Ue(e[t]),n+="<tbody >",++t;t<r&&e[t].trim()[0]==="|";t++)n+=Xe(e[t]);return n+="</tbody></table>",{startIdx:t-1,result:n}}function Ue(e){let t=-1,r="<thead><tr>";for(let n=0,s=e.length;n<s;n++)e[n]=="|"&&$(e,n-1)&&$(e,n+1)&&(t!=-1&&(r+=`<th>${e.slice(t+1,n)}</th>`),t=n);return r+"</tr></thead>"}function Xe(e){let t=-1,r="<tr>";for(let n=0,s=e.length;n<s;n++)if(e[n]=="|"&&$(e,n-1)&&$(e,n+1)){if(t!=-1){let l=e.slice(t+1,n);if(l.trim()[0]==="-")continue;r+=`<td>${l}</td>`}t=n}return r+"</tr>"}function $(e,t){return e[t]===" "||e[t]==null}function P(e,t,r){let n="<div class=flex-layout>",s="";for(++t;t<r&&!ye(e[t]);){if(H(e[t])){const{result:l,startIdx:a}=P(e,t,r);s+=l,t=a}else xe(e[t])?(n+=`<div class=flex-layout-item>${I(s)}</div>`,s=""):s+=e[t].trim()?e[t]+`
`:"";t++}return n+=`<div class=flex-layout-item>${I(s)}</div>`,n+="</div>",{result:n,startIdx:t}}function Ye(e,t,r){let n="<div class=head-layout>";for(++t;t<r&&!Se(e[t]);)if(H(e[t])){const{startIdx:s,result:l}=P(e,t,r);n+=l,t=s+1}else n+=e[t].trim()?I(e[t]):"",t++;return n+="</div>",{result:n,startIdx:t}}const _e={lineNumber:!1,highlight:!1};function I(e,t){const r=e.split(`
`);let n="",s=(r==null?void 0:r.length)||0;for(let l=0;l<s;){if(he(r[l]))n+=ze(r[l]);else if(Oe(r[l])){const{result:a,startIdx:c}=Ye(r,l,s);l=c,n+=a}else if(H(r[l])){const{result:a,startIdx:c}=P(r,l,s);l=c,n+=a}else if(we(r[l])){const{result:a,startIdx:c}=Qe(r,l,s);l=c,n+=a}else if($e(r[l])){const{result:a,startIdx:c}=Ge(r,l,s);l=c-1,n+=a}else if(de(r[l])){const{result:a,startIdx:c}=Ze(r,l,s);l=c-1,n+=a}else if(ge(r[l])){const{result:a,startIdx:c}=Ae(r,l,s,t||_e);l=c,n+=a}else me(r[l])?n+=be(r[l]):(r[l]=r[l].trim())&&(n+=C(r[l]));l++}return n}export{I as m};
