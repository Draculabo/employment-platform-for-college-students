import{d as $,r as R}from"./dayjs.6d6bf3b5.js";import{C as f,o as n,c as u,a as s,T as e,a4 as d,at as p,au as m,R as E,u as r,K as H,r as k,ar as L,e as T,L as C,a3 as w,M as g,O as x}from"./@vue.fc97fa33.js";import{_ as y}from"./vue-markdown-menu-bar.ed0bbcd3.js";import{u as b,a as N,g as O,e as U}from"./index.e95f406b.js";import{u as B}from"./vue-router.68db326f.js";import{a as V}from"./community.fc721f69.js";$.extend(R);$.locale("zh-cn");function q(t){return $(t).fromNow()}const I=t=>(p("data-v-80652053"),t=t(),m(),t),M={class:"user-tooltip flex content-card"},z={class:"head flex"},W=["src"],Y={class:"nick-name"},j=I(()=>s("strong",null,"\u6027\u522B\uFF1A",-1)),K=I(()=>s("strong",null,"\u9662\u6821\uFF1A",-1)),G=I(()=>s("strong",null,"\u6C42\u804C\u610F\u5411\uFF1A",-1)),J=I(()=>s("strong",null,"\u6240\u5728\u5730\u533A\uFF1A",-1)),P=f({__name:"userTooltip",props:{userInfo:null},setup(t){return(c,i)=>(n(),u("div",M,[s("div",z,[s("img",{class:"mr-10",src:t.userInfo.avatar,alt:"\u5934\u50CF"},null,8,W),s("strong",Y,e(t.userInfo.nickName),1)]),s("p",null,[j,d(e(t.userInfo.sex)+"\u751F",1)]),s("p",null,[K,s("span",null,e(t.userInfo.school)+" - ",1),s("span",null,e(t.userInfo.graduation)+"\u5C4A",1)]),s("p",null,[G,d(e(t.userInfo.professional),1)]),s("p",null,[J,d(e(t.userInfo.origin),1)])]))}});const Q=y(P,[["__scopeId","data-v-80652053"]]),X=t=>(p("data-v-5593f860"),t=t(),m(),t),Z={class:"user-head"},tt=["src"],st={class:"user-info"},et={class:"user-name"},ot={class:"date-school"},nt={key:0,class:"datetime mr-20"},at={class:"school"},ut=X(()=>s("i",{class:"iconfont icon-school"},null,-1)),ct=f({__name:"userInfo",props:{userInfo:null,publishTime:null},setup(t){return(c,i)=>{var _,a,o,l;return n(),u("div",Z,[s("img",{class:"pointer mr-10",src:(_=t.userInfo)==null?void 0:_.avatar},null,8,tt),E(Q,{class:"user-tooltip",userInfo:t.userInfo},null,8,["userInfo"]),s("div",st,[s("span",et,e((a=t.userInfo)==null?void 0:a.nickName),1),s("div",ot,[t.publishTime?(n(),u("span",nt,e(r(q)(t.publishTime))+"\u53D1\u5E03",1)):H("",!0),s("span",at,[ut,d(" "+e((o=t.userInfo)==null?void 0:o.school)+" - "+e((l=t.userInfo)==null?void 0:l.graduation)+"\u5C4A ",1)])])])])}}});const Ht=y(ct,[["__scopeId","data-v-5593f860"]]);function Lt(){const{loginState:t}=b();return t.logined}function it(){const t="__BROWSE_HISTORY__",i=k([]),_=B();function a(h){let v=o();v.length>=10&&v.pop(),v.unshift(h),N(t,v,60*60*1e3*24*365)}function o(){return O(t)||[]}function l(h){i.value=h}function F(h){_.push(`/community/detail?articleId=${h}`)}return L(()=>{l(o()||[])}),{data:i,useDetail:F,setBrowseHistory:a,getBrowseHistory:o}}function S(t){return t>=1e3?(t/1e3).toFixed(1)+"k":t}const lt=""+new URL("../empty-placeholder.svg",import.meta.url).href,rt=t=>(p("data-v-e742a201"),t=t(),m(),t),_t={class:"empty content-card"},dt=rt(()=>s("img",{width:"150",src:lt,alt:"\u7A7A\u5360\u4F4D\u7B26"},null,-1)),ht=f({__name:"empty",props:{title:null},setup(t){return(c,i)=>(n(),u("div",_t,[dt,s("p",null,e(t.title),1)]))}});const A=y(ht,[["__scopeId","data-v-e742a201"]]);function ft(){const t=k([]),c=B();async function i(){const a=await V({requireCount:10});if(a.code===200){t.value=a.data;return}U(a.msg)}function _(a){c.push(`/community/detail?articleId=${a}`)}return T(()=>i()),{useDetail:_,hotList:t}}const pt=t=>(p("data-v-717a63c4"),t=t(),m(),t),mt={class:"hot-list content-card"},yt=pt(()=>s("p",{class:"hot-title slide-title"}," \u70ED\u95E8\u9762\u7ECF ",-1)),vt={key:0,class:"list-style-init"},It=["onClick"],gt=f({__name:"hotList",setup(t){const{hotList:c,useDetail:i}=ft();return(_,a)=>(n(),u("div",mt,[yt,r(c).length?(n(),u("ul",vt,[(n(!0),u(C,null,w(r(c),(o,l)=>(n(),u("li",{class:"line-2",onClick:F=>r(i)(o.articleId)},[s("span",{class:g(["rank",{topRank:l<3}])},e(l+1),3),d(" "+e(o.title)+" ",1),s("i",{class:g(["iconfont icon-hot font-20",{topRank:l<3}])},null,2),s("span",{class:g({topRank:l<3})},e(r(S)(o.hot)),3)],8,It))),256))])):(n(),x(A,{key:1,title:"\u8FD8\u6CA1\u6709\u9762\u7ECF\uFF0C\u5FEB\u53BB\u62A2\u6C99\u53D1\u5427."}))]))}});const Tt=y(gt,[["__scopeId","data-v-717a63c4"]]),D=t=>(p("data-v-e6b20fe6"),t=t(),m(),t),$t={class:"browse-history-list mt-20 content-card"},Ft=D(()=>s("p",{class:"browse-history-title slide-title"}," \u6D4F\u89C8\u5386\u53F2 ",-1)),kt={key:0,class:"list-style-init history-list"},Ct=["onClick"],wt=D(()=>s("i",{class:"iconfont icon-browse font-20"},null,-1)),xt=f({__name:"browseHistory",setup(t){const{data:c,useDetail:i}=it();return(_,a)=>(n(),u("div",$t,[Ft,r(c).length?(n(),u("ul",kt,[(n(!0),u(C,null,w(r(c),o=>(n(),u("li",{class:"line-2",onClick:l=>r(i)(o.articleId)},[d(e(o.title)+"\xA0",1),s("span",null,[wt,d(" "+e(r(S)(o.hot)),1)])],8,Ct))),256))])):(n(),x(A,{key:1,title:"\u4F60\u8FD8\u6CA1\u6D4F\u89C8\u8FC7\u4EFB\u4F55\u6587\u7AE0"}))]))}});const bt=y(xt,[["__scopeId","data-v-e6b20fe6"]]);export{bt as B,A as E,Tt as H,Ht as U,Q as a,q as f,Lt as i,S as n,it as u};
