function le(e){let t="";for(;de.test(e);){let r=e.indexOf("!["),n=e.slice(0,r);t+=n,e=e.slice(r+1);let s=e.indexOf("]("),a=e.slice(0,s);e=e.slice(s+2);let l=e.indexOf(")"),c=e.slice(0,l);e=e.slice(l+1),t+=`<p><img alt=${a} src=${c} /></p>`}return t+e}function ae(e){let t="";for(;fe.test(e);){let r=e.indexOf("["),n=e.slice(0,r);t+=n,e=e.slice(r+1);let s=e.indexOf("]("),a=e.slice(0,s);e=e.slice(s+2);let l=e.indexOf(")"),c=e.slice(0,l);e=e.slice(l+1),t+=`<a href=${c}>${a}</a>`}return t+e}function k(e,t=!1){let r=ce(e);return r=ie(r),r=ue(r),r=le(r),r=ae(r),r=pe(r),t?r:`<p>${r}</p>`}function ce(e){let t="",r=-1;for(;(r=e.indexOf("**"))!=-1;){t+=e.slice(0,r),e=e.slice(r+2);let n=e.indexOf("**");t+=`<strong>${e.slice(0,n)}</strong>`,e=e.slice(n+2)}return e&&(t+=e),t}function ie(e){let t="",r=-1;for(;(r=e.indexOf("*"))!=-1;){t+=e.slice(0,r),e=e.slice(r+1);let n=e.indexOf("*");t+=`<i>${e.slice(0,n)}</i>`,e=e.slice(n+1)}return e&&(t+=e),t}function ue(e){let t="",r=-1;for(;(r=e.indexOf("`"))!=-1;){t+=e.slice(0,r),e=e.slice(r+1);let n=e.indexOf("`");t+=`<code class=single-code>${e.slice(0,n)}</code>`,e=e.slice(n+1)}return e&&(t+=e),t}function pe(e){return e.replace(/icon:(\w+)(\s|\b)/g,(t,r)=>`<i class='iconfont icon-${r}'></i>`)}const oe=/(#+)\s(.*)/g,L=/^\s*(\d)\./,fe=/\[(.*)\]\((.*)\)/,de=/!\[(.*)\]\((.*)\)/,h=/\/\*(.*)\*\//g,E=/(function)([\s\(&lt])/g;function Q(e){/^\s+/.test(e[0])&&(e[0]=e[0].replace(/^(\s+)/g,t=>`
`)),e[0].startsWith(`
`)||(e[0]=`
`+e[0])}function T(e,t){let r="";for(let n of e){let s=n.children.length?T(n.children,t):"";r+=`<li>${k(n.value+s,!0)}</li>`}return`<${t?"ol":"ul"}>${r}</${t?"ol":"ul"}>`}function $e(e){return L.test(e)}function he(e){let t=e.indexOf("-");return t==0||t!=-1&&!e.slice(0,t).trim()}function ge(e){return e.indexOf("#")!=-1}function me(e){return e.startsWith("```")}function we(e){return e.startsWith("> ")}function g(e,t,r){return e<t-1?r:""}function N(e){return e.startsWith("//")||e.startsWith("/*")||e.startsWith("*")||e.startsWith("#")}function xe(e){return e.trim()[0]==="|"}function W(e){return h.test(e)}function U(e){return E.test(e)}function m(e){let t="",r=-1;for(;(r=e.indexOf('"'))!=-1||(r=e.indexOf("'"))!=-1;){let n=!1;e.indexOf('"')!=-1&&(n=!0),t+=e.slice(0,r),e=e.slice(r+1);let s=n?e.indexOf('"'):e.indexOf("'");t+=`<q class=declare-string>${e.slice(0,s)}</q>`,e=e.slice(s+1)}return e&&(t+=e),t}function R(e){return e.replace(/([^\w])(false|true)(?!\w)/g,(t,r,n)=>`${r}<span class=declare-boolean>${n}</span>`)}function j(e){return e.replace(/([^\w])(\d+)(?![\w\.])/g,(t,r,n)=>`${r}<span class=declare-number>${n}</span>`)}function F(e){return e.replace(/(\s*null)(?!\w)/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function w(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(e,t){return t?`<span class=line-number>${e}</span>`:""}function H(e){return e.trim().startsWith("::: start")}function ye(e){return e.trim().startsWith("::: end")}function Oe(e){return e.trim().startsWith(":::")}function Se(e){return e.trim().startsWith("::: headStart")}function be(e){return e.trim().startsWith("::: headEnd")}function ve(e){return`<blockquote>${e.slice(2)}</blockquote>`}function I(e,t,r){let n="",s=e.split(`
`);for(let a=0;a<s.length;a++){let l=s[a];n+=Ie(w(l),t++,r)}return n}function Ie(e,t,r){let n=[],s="",a=0,l="";e=m(e);let c=e.length;for(let u=0;u<c;u++)if(e[u]==")"){let y="";for(;n.length&&(y=n.pop())!="(";)s=y+s;y!="("?n.push(p(s+")",!1)):(a--,n.push(p(s,!0))),s=""}else e[u]=="("&&a++,n.push(e[u]);let i=0;for(;a--;)i=n.lastIndexOf("("),l="("+p(n.slice(i+1).join(""),!1)+l,n=n.slice(0,i);return n.length&&(l=p(n.join(""),!1)+l),`<p>${x(t,r.lineNumber)}<span>${l}</span></p>`}function p(e,t){if(!e.trim())return t?`(${e})`:e;if(N(e.trim()))return Ee(e);let r=e;return r=_(r),r=m(r),r=X(r),r=Le(r),r=Ce(r),r=ke(r),r=Y(r),r=R(r),r=j(r),r=F(r),t?`(${r})`:r}function X(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,a,l)=>`${B(s)}${O(a)}=${X(l)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,a,l)=>`${B(s)}${O(a)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${O(r[n])}${g(n,s,",")}`;return t}function O(e){return/(\s*\w+\s*)?:(\s*\w+\s*)/.test(e)?e.replace(/(\s*\w+\s*)?:(\s*\w+\s*)/,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):U(e)?Y(e):e}function Y(e){return e.replace(E,(t,r,n)=>`<span class=declare-function>${r}</span>${n}`)}function Ce(e){return e.includes("=>")?e.replace(/=>/g,t=>`<span class=declare-arrow-func>${t}</span>`):e}function ke(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function B(e){return e.replace(/(const|let|var)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function Le(e){return W(e)?_(e):e.replace(/(class|await|in|of|typeof|module|async|this|as|super|module|export\s+default|export|import|from|while|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s+\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function Ee(e){return`<span class=declare-comments>${e}</span>`}function _(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}function Te(e,t,r){if(/(<!--.*-->)/g.test(e))return`${o(t,r)}<span class=declare-comments>${w(RegExp.$1)}</span></p>`;if(/(\s*)<(\!?\w+)(.*)>(.*)<\/\w+>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=D(n);return`${o(t,r)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt${RegExp.$4}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`}else if(/(\s*)<(\!?\w+)(.*)>/g.test(e)){let n=RegExp.$3.trim().split(" "),s=D(n);return`${o(t,r)}${RegExp.$1}&lt<span class=declare-html-tag>${RegExp.$2}</span>${s&&"&nbsp;"+s}&gt</p>`}else return/(\s*)<\/(\w+)>/g.test(e)?`${o(t,r)}${RegExp.$1}&lt/<span class=declare-html-tag>${RegExp.$2}</span>&gt</p>`:I(e,t++,r)}function o(e,t){return`<p class=line-code>${x(e,t.lineNumber)}`}function D(e){let t="";for(let r=0,n=e.length;r<n;r++){let s=e[r];if(!s.trim()){t+=s;continue}let a=s.indexOf("=");if(a!=-1){let l=s.slice(0,a),c=s.slice(a+1);t+=`<span class=declare-attr-key>${l}</span>=<span class=declare-attr-value>${c}</span>${g(r,n,"&nbsp;")}`}else{t+=s;continue}}return t}function S(){return""}function Ne(e,t,r){let n="",s=e.split(`
`);for(let a=0;a<s.length;a++){let l=s[a];n+=We(l,t++,r)}return n}function We(e,t,r){let n=[],s="",a=0,l="";for(let i=0;i<e.length;i++)if(e[i]==")"){let u="";for(;n.length&&(u=n.pop())!="(";)s=u+s;u!="("?n.push(f(s+")",!1)):(a--,n.push(f(s,!0))),s=""}else e[i]=="("&&a++,n.push(e[i]);let c=0;for(;a--;)c=n.lastIndexOf("("),l="("+f(n.slice(c+1).join(""),!1)+l,n=n.slice(0,c);return n.length&&(l=f(n.join(""),!1)+l),`<p>${x(t,r.lineNumber)}<span>${l}</span></p>`}function f(e,t){if(!e.trim())return t?`(${e})`:e;if(N(e.trim()))return Fe(e);let r=e;return r=re(r),r=ee(r),r=je(r),r=m(r),r=Re(r),r=R(r),r=j(r),r=F(r),t?`(${r})`:r}function ee(e){if(/^(char|int|String|Byte\[?\]?|[A-Z]+)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,a,l)=>`${G(s)}${b(a)}=${ee(l)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,a,l)=>`${G(s)}${b(a)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${b(r[n])}${g(n,s,",")}`;return t}const q=/(\s*\w+\s*)?:(\s*\w+\s*)/g,A=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function b(e){return A.test(e)?e.replace(A,(t,r,n)=>`${r?`<span class=declare-param-type>${r}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):q.test(e)?e.replace(q,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):e}function Re(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function G(e){return e.replace(/(const|let|var|int|string|Byte\[?\]?|[A-Z]+)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function je(e){return W(e)?re(e):e.replace(/(class|in|of|this|super|interface|module|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function Fe(e){return`<span class=declare-comments>${e}</span>`}function re(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}function M(e,t,r){let n="",s=e.split(`
`);for(let a=0;a<s.length;a++){let l=s[a];n+=He(w(l),t++,r)}return n}function He(e,t,r){let n=[],s="",a=0,l="";for(let i=0;i<e.length;i++)if(e[i]==")"){let u="";for(;n.length&&(u=n.pop())!="(";)s=u+s;u!="("?n.push(d(s+")",!1)):(a--,n.push(d(s,!0))),s=""}else e[i]=="("&&a++,n.push(e[i]);let c=0;for(;a--;)c=n.lastIndexOf("("),l="("+d(n.slice(c+1).join(""),!1)+l,n=n.slice(0,c);return n.length&&(l=d(n.join(""),!1)+l),`<p>${x(t,r.lineNumber)}<span>${l}</span></p>`}function d(e,t){if(!e.trim())return t?`(${e})`:e;if(N(e.trim()))return qe(e);let r=e;return r=se(r),r=te(r),r=De(r),r=m(r),r=Pe(r),r=Be(r),r=ne(r),r=R(r),r=j(r),r=F(r),t?`(${r})`:r}function te(e){if(/^(const|int|string|var|let)/.test(e.trim())){if(/(\w+\s+)(.*\s*)=(.*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)=(.*)/,(n,s,a,l)=>`${K(s)}${v(a)}=${te(l)}`);if(/(\w+\s+)(.*\s*)/.test(e))return e.replace(/(\s*\w+\s+)(.*\s*)/,(n,s,a,l)=>`${K(s)}${v(a)}`)}let t="",r=e.split(",");for(let n=0,s=r.length;n<s;n++)t+=`${v(r[n])}${g(n,s,",")}`;return t}const J=/(\s*\w+\s*)?:(\s*\w+\s*)/g,Z=/(:\s*\w+\s*)?&lt;(\s*\/?\s*\w+\s*)&gt;/g;function v(e){return Z.test(e)?e.replace(Z,(t,r,n)=>`${r?`<span class=declare-param-type>${r}</span>`:""}&lt;<span class=declare-param-type>${n}</span>&gt;`):J.test(e)?e.replace(J,(t,r,n)=>r?`<span class=declare-param>${r}</span>:<span class=declare-param-type>${n}</span>`:`:<span class=declare-param-type>${n}</span>`):U(e)?ne(e):e}function ne(e){return e.replace(E,(t,r,n)=>`<span class=declare-function>${r}</span>${n}`)}function Pe(e){return e.includes("=>")?e.replace(/=>/g,t=>`<span class=declare-arrow-func>${t}</span>`):e}function Be(e){return e.replace(/(\w+)(\s*)\(/g,(t,r,n)=>`<span class=declare-func-execute>${r}</span>${n}(`)}function K(e){return e.replace(/(const|let|var|int|string)(\s+)/gi,(t,r,n)=>`<span class=declare-keyword>${r}</span><span class=declare-constant-name>${n}</span>`)}function De(e){return W(e)?se(e):e.replace(/(class|in|of|this|super|interface|typeof|module|declare|type|keyof|infer|export\s+default|export|import|from|extends|new|abstract|void|static|return|break|continue|switch|case|finally|try|catch|else|if|throw)(?=[\s\(\.])/g,(t,r)=>`<span class=declare-operator-char>${r}</span>`)}function qe(e){return`<span class=declare-comments>${e}</span>`}function se(e){return e.replace(h,t=>`<span class=declare-comments>${t}</span>`)}const Ae={java:Ne,c:S,["c++"]:S,["c#"]:S,js:I,javascript:I,ts:M,typescript:M,html:Te};function Ge(e,t,r,n){let s="",a=e[t].slice(3).trim().toLowerCase(),l=1;for(++t;t<r&&!e[t].startsWith("```");)s+=n.highlight?Ae[a](e[t],l++,n):e[t]+`
`,t++;return e[t]="",{startIdx:t,result:n.highlight?`<pre><span class=language>${a}</span><code>${s}</code></pre>`:`<pre><code>${s}</code></pre>`}}function Me(e,t,r){let n="";for(;t<r;t++)if(!!e[t].trim())if(e[t].trim()[0]==="-"&&e[t].indexOf("-")!=-1)n+=e[t]+`
`;else break;return n=Je(n),{startIdx:t,result:n}}function Je(e){const t=e.match(/(\s?)+-\s(.*)/g);if(!t)return e;Q(t);const r=Ze(t);return T(r,!1)}function Ze(e){const t=[],r=[],n=e.length;for(let s=0;s<n;s++){const a=e[s].indexOf("-"),l={children:[],value:e[s].slice(a+1),level:a,parent:null};if(!r.length){t.push(l),r.push(l);continue}const c=r[r.length-1].level,i=e[s].indexOf("-");let u;if(c===i)u=r[r.length-1].parent;else if(c>i){for(;r[r.length-1].level>i;)r.pop();u=r[r.length-1].parent}else u=r[r.length-1];l.parent=u,u?u.children.push(l):t.push(l),r.push(l)}return t}function Ke(e,t,r){let n="";for(;t<r;t++)if(!!e[t].trim())if(L.test(e[t]))n+=e[t]+`
`;else break;return n=Ve(n),{startIdx:t,result:n}}function Ve(e){const t=e.match(/\s*\d\.(.*)/g);if(!t)return e;Q(t);const r=ze(t);return T(r,!0)}function ze(e){const t=[],r=[],n=e.length;for(let s=0;s<n;s++){let a=0;L.test(e[s])&&(a=e[s].indexOf(String(RegExp.$1+".")));const l={children:[],value:e[s].slice(a+2),level:a,parent:null};if(!r.length){t.push(l),r.push(l);continue}const c=r[r.length-1].level,i=a;let u;if(c===i)u=r[r.length-1].parent;else if(c>i){for(;r[r.length-1].level>i;)r.pop();u=r[r.length-1].parent}else u=r[r.length-1];l.parent=u,u?u.children.push(l):t.push(l),r.push(l)}return t}function V(e){return e.length>6?6:e.length}function Qe(e){return e.trim().replace(oe,(t,r,n)=>`<h${V(r)}>${k(n,!0)}</h${V(r)}>`)}function Ue(e,t,r){let n="<table>";for(n+=Xe(e[t]),n+="<tbody >",++t;t<r&&e[t].trim()[0]==="|";t++)n+=Ye(e[t]);return n+="</tbody></table>",{startIdx:t-1,result:n}}function Xe(e){let t=-1,r="<thead><tr>";for(let n=0,s=e.length;n<s;n++)e[n]=="|"&&$(e,n-1)&&$(e,n+1)&&(t!=-1&&(r+=`<th>${e.slice(t+1,n)}</th>`),t=n);return r+"</tr></thead>"}function Ye(e){let t=-1,r="<tr>";for(let n=0,s=e.length;n<s;n++)if(e[n]=="|"&&$(e,n-1)&&$(e,n+1)){if(t!=-1){let a=e.slice(t+1,n);if(a.trim()[0]==="-")continue;r+=`<td>${a}</td>`}t=n}return r+"</tr>"}function $(e,t){return e[t]===" "||e[t]==null}function P(e,t,r,n){let s="<div class=flex-layout>",a="";for(++t;t<r&&!ye(e[t]);){if(H(e[t])){const{result:l,startIdx:c}=P(e,t,r,n);a+=l,t=c}else Oe(e[t])?(s+=`<div class=flex-layout-item>${C(a,{...n,xss:!1})}</div>`,a=""):a+=e[t].trim()?e[t]+`
`:"";t++}return s+=`<div class=flex-layout-item>${C(a,{...n,xss:!1})}</div>`,s+="</div>",{result:s,startIdx:t}}function _e(e,t,r,n){let s="<div class=head-layout>";for(++t;t<r&&!be(e[t]);)if(H(e[t])){const{startIdx:a,result:l}=P(e,t,r,n);s+=l,t=a+1}else s+=e[t].trim()?C(e[t],{...n,xss:!1}):"",t++;return s+="</div>",{result:s,startIdx:t}}const z={lineNumber:!1,highlight:!1,xss:!0};function C(e,t){let r=t||z,n="";r=Object.assign({...z},r);let s=r.xss?w(e).split(`
`):e.split(`
`),a=(s==null?void 0:s.length)||0;for(let l=0;l<a;){if(ge(s[l]))n+=Qe(s[l]);else if(Se(s[l])){const{result:c,startIdx:i}=_e(s,l,a,r);l=i,n+=c}else if(H(s[l])){const{result:c,startIdx:i}=P(s,l,a,r);l=i,n+=c}else if(xe(s[l])){const{result:c,startIdx:i}=Ue(s,l,a);l=i,n+=c}else if(he(s[l])){const{result:c,startIdx:i}=Me(s,l,a);l=i-1,n+=c}else if($e(s[l])){const{result:c,startIdx:i}=Ke(s,l,a);l=i-1,n+=c}else if(me(s[l])){const{result:c,startIdx:i}=Ge(s,l,a,r);l=i,n+=c}else we(s[l])?n+=ve(s[l]):(s[l]=s[l].trim())&&(n+=k(s[l]));l++}return n}export{C as m};
